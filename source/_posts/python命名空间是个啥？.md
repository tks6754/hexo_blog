---
title: python命名空间是个啥？
date: 2016-12-22 21:46:10
category:
    - python
tags:
    - python
    - 命名空间
---

刚学py，本来很奇怪，凭什么py的类啊、函数啊什么的，可以有同名的变量名。最让我奇怪的是：它们竟然还是不同的变量！！这让写Java的我觉得有点不可思议，要知道，在Java中同名变量是会冲突的。那啥？这就涉及到py的命名空间了。Python的命名空间是个啥东西？

## 命名空间(Namespace)的概念

> 命名空间(Namespace)是一个字典，key是对象名，value是对象。就是一个“名字”到“对象”的映射。

在py中，一切都是对象，这里的一切包括基本数据类型、函数、类。确定一个对象需要id（可以理解为类似内存地址）、类型、值，但是这不方便使用，为此我们另外一般会给对象“标识符”。
> 标识符(identifer)是对象的名字，可以是变量名、常量明、函数名、类名

```python
>>> a = 9
>>> id(9)
36970648
>>> b = a
>>> id(b)
36970648
>>> b = 10
>>> b
10
>>> a
9
```
py中的赋值都是把对象绑定到名字，对象本身并没有变化。例子后面把b绑定到“10”，a还是原来的值（这里需要注意，基本数据类型和其他“引用”类型的内存模型有不同，这里不讨论）。

## 作用域(scope)与LEGB法则
py中有很多命名空间，不同“地方”有不同的不同的命名空间，这些命名空间事通过作用域来区分的，不同作用域内的命名空间相互独立存在。
> 作用域(scope)是一个文本域的概念。说白了，就是在py代码中位置区域

py中作用域有四种，就是常说的LEGB啦。
- 局部命名空间（locals）：函数内部的名字空间，一般包括函数的局部变量以及形式参数
- 闭包命名空间（enclosing function）：在嵌套函数中外部函数的名字空间。常见于闭包
- 全局命名空间（globals）：读入一个模块（也即一个.py文档）后产生的名称空间。
- 内建命名空间（\_\_builtins\_\_）：内置模块空间，Python 解释器启动时自动载入__built__模块后所形成的名称空间

当程序引用某个变量的名字时，就会从当前名字空间开始搜索。搜索顺序规则便是: LEGB.
> locals -> enclosing function -> globals -> \_\_builtins\_\_
